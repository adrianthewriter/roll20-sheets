<div class="sheet-root sheet-gildeduniverse"><input type="hidden" name="attr_dialog_session-log" value="hidden" class="sheet-field"><input type="hidden" name="attr_sheet_mode" value="character" class="sheet-field"><div class="sheet-dialog sheet-dialog--session-log"><div class="sheet-container"><label class="sheet-toggle"><input type="checkbox" name="attr_dialog_session-log" value="hidden" class="sheet-togglebox"><span></span></label><h2>Session Log</h2><div class="sheet-content"><div class="sheet-table--sessionlog"><div class="sheet-tableheader"><span class="sheet-view"></span><span>Session Date</span><span>XP Gained</span></div><fieldset class="repeating_sessionlog"><div class="sheet-tablerow"><input type="hidden" name="attr_session-header" class="sheet-toggle sheet-togglebox"><label class="sheet-toggle"><input type="checkbox" name="attr_session-toggle" value="hidden" class="sheet-togglebox"><span></span></label><input type="text" name="attr_session-date" value="" class="sheet-field"><input type="text" name="attr_session-xp" value="" class="sheet-field"><input type="hidden" name="attr_session-toggle" class="sheet-toggle sheet-togglebox"><div class="sheet-drawer sheet-drawer--session-details"><textarea name="attr_session-desc" class="sheet-field"></textarea><label class="sheet-toggle"><input type="checkbox" name="attr_session-header" value="checked" class="sheet-togglebox"><span>Mark as 'Header'</span></label></div></div></fieldset></div></div></div></div><div class="sheet-mode sheet-mode--character"><div class="sheet-header"><div><label class="sheet-field"><span>Name</span><input type="text" name="attr_character-name" value="" class="sheet-field"></label><label class="sheet-field"><span>Player</span><input type="text" name="attr_player-name" value="" class="sheet-field"></label><div class="sheet-container"><label class="sheet-toggle"><input type="checkbox" name="attr_dialog_session-log" value="checked" class="sheet-togglebox"><span></span></label><label class="sheet-field"><span>XP</span><input type="text" name="attr_character-xp" value="" class="sheet-field"><span class="sheet-sep">/</span><input type="text" name="attr_character-xp_max" value="" class="sheet-field"></label></div></div><div><h1 class="sheet-logo"><span class="sheet-logobox"><span class="sheet-logotype">Gilded Universe</span></span></h1><span class="sheet-subtitle" name="attr_sheet-mode_max">Character Sheet</span></div><div><label class="sheet-field"><span>Age</span><input type="text" name="attr_character-age" value="" class="sheet-field"></label><label class="sheet-field"><span>Sex</span><input type="text" name="attr_character-sex" value="" class="sheet-field"></label><label class="sheet-field"><span>Height</span><input type="text" name="attr_character-ht" value="" class="sheet-field"></label><label class="sheet-field"><span>Weight</span><input type="text" name="attr_character-wt" value="" class="sheet-field"></label></div></div><div class="sheet-sec sheet-sec--main"><div><div class="sheet-group sheet-group--attrs"><div class="sheet-label"><span>Attributes</span></div><div class="sheet-content"><div class="sheet-attr"><span class="sheet-label">STR</span><input type="text" name="attr_str" value="" class="sheet-field"><label class="sheet-toggle" title="Mark as 'Key Attribute'"><input type="checkbox" name="attr_str-marked" value="1" class="sheet-togglebox"><span></span></label></div><div class="sheet-attr"><span class="sheet-label">DEX</span><input type="text" name="attr_dex" value="" class="sheet-field"><label class="sheet-toggle" title="Mark as 'Key Attribute'"><input type="checkbox" name="attr_dex-marked" value="1" class="sheet-togglebox"><span></span></label></div><div class="sheet-attr"><span class="sheet-label">INT</span><input type="text" name="attr_int" value="" class="sheet-field"><label class="sheet-toggle" title="Mark as 'Key Attribute'"><input type="checkbox" name="attr_int-marked" value="1" class="sheet-togglebox"><span></span></label></div><div class="sheet-attr"><span class="sheet-label">WIT</span><input type="text" name="attr_wit" value="" class="sheet-field"><label class="sheet-toggle" title="Mark as 'Key Attribute'"><input type="checkbox" name="attr_wit-marked" value="1" class="sheet-togglebox"><span></span></label></div></div></div><div class="sheet-group sheet-flip sheet-group--stats"><div class="sheet-label"><span>Other Stats</span></div><div class="sheet-content"><label class="sheet-field"><span>Health</span><input type="text" name="attr_health" value="" class="sheet-field"><span class="sheet-sep">/</span><input type="text" name="attr_health_max" value="" class="sheet-field"></label><div><label class="sheet-field"><span>Armor</span><input type="text" name="attr_armor" value="" class="sheet-field"></label><label class="sheet-field"><span>Def.</span><input type="text" name="attr_defense" value="" class="sheet-field"></label></div><label class="sheet-field"><span>Vigor</span><input type="text" name="attr_vigor" value="" class="sheet-field"><span class="sheet-sep">/</span><input type="text" name="attr_vigor_max" value="" class="sheet-field"></label><label class="sheet-field"><span>Resolve</span><input type="text" name="attr_resolve" value="" class="sheet-field"><span class="sheet-sep">/</span><input type="text" name="attr_resolve_max" value="" class="sheet-field"></label><label class="sheet-field"><button type="roll" name="roll_reaction" value="&amp;{template:reactionRoll} {{name=@{character-name}}} {{title=Reaction}} {{dice=[[@{reaction}-@{reaction}d6>2f<@{dex}scs=1cf=0]]}} "><span>Reaction</span></button><input type="text" name="attr_reaction" value="" class="sheet-field"></label><label class="sheet-field"><span>Speed</span><input type="text" name="attr_speed" value="" class="sheet-field"></label></div></div></div><div class="sheet-box sheet-box--lifepaths"><h2><span class="sheet-label">Lifepaths</span></h2><div class="sheet-content"><div class="sheet-table--lifepaths"><fieldset class="repeating_lifepaths"><div class="sheet-tablerow"><label class="sheet-field"><span></span><input type="text" name="attr_lifepath" value="" class="sheet-field"></label><div class="sheet-meter" title="Take +2d6 (max 10d6) on two Skill checks related to this Lifepath."><input type="checkbox" name="attr_lifepath-bonus" value="0" checked="" class="sheet-hidden sheet-meterbox"><input type="checkbox" name="attr_lifepath-bonus" value="1" class="sheet-meterbox"><span></span><input type="checkbox" name="attr_lifepath-bonus" value="2" class="sheet-meterbox"><span></span></div></div></fieldset></div></div></div><div class="sheet-group sheet-group--skills"><div class="sheet-label"><span>Skills</span></div><div class="sheet-content"><div><input type="hidden" name="attr_brute-force_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{str}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_brute-force" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Brute Force (STR)}} {{marked=[[@{str-marked}]]}} @{brute-force_formula} "><span>Brute Force (STR)</span></button><input type="text" name="attr_brute-force" value="" class="sheet-field"></label><input type="hidden" name="attr_close-combat_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{str}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_close-combat" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Close Combat (STR)}} {{marked=[[@{str-marked}]]}} @{close-combat_formula} "><span>Close Combat (STR)</span></button><input type="text" name="attr_close-combat" value="" class="sheet-field"></label><input type="hidden" name="attr_machinery_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{str}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_machinery" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Machinery (STR)}} {{marked=[[@{str-marked}]]}} @{machinery_formula} "><span>Machinery (STR)</span></button><input type="text" name="attr_machinery" value="" class="sheet-field"></label><input type="hidden" name="attr_stamina_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{str}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_stamina" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Stamina (STR)}} {{marked=[[@{str-marked}]]}} @{stamina_formula} "><span>Stamina (STR)</span></button><input type="text" name="attr_stamina" value="" class="sheet-field"></label></div><div><input type="hidden" name="attr_mobility_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{dex}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_mobility" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Mobility (DEX)}} {{marked=[[@{dex-marked}]]}} @{mobility_formula} "><span>Mobility (DEX)</span></button><input type="text" name="attr_mobility" value="" class="sheet-field"></label><input type="hidden" name="attr_piloting_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{dex}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_piloting" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Piloting (DEX)}} {{marked=[[@{dex-marked}]]}} @{piloting_formula} "><span>Piloting (DEX)</span></button><input type="text" name="attr_piloting" value="" class="sheet-field"></label><input type="hidden" name="attr_ranged-combat_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{dex}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_ranged-combat" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Ranged Combat (DEX)}} {{marked=[[@{dex-marked}]]}} @{ranged-combat_formula} "><span>Ranged Combat (DEX)</span></button><input type="text" name="attr_ranged-combat" value="" class="sheet-field"></label><input type="hidden" name="attr_tinkering_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{dex}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_tinkering" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Tinkering (DEX)}} {{marked=[[@{dex-marked}]]}} @{tinkering_formula} "><span>Tinkering (DEX)</span></button><input type="text" name="attr_tinkering" value="" class="sheet-field"></label></div><div><input type="hidden" name="attr_history_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{int}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_history" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=History (INT)}} {{marked=[[@{int-marked}]]}} @{history_formula} "><span>History (INT)</span></button><input type="text" name="attr_history" value="" class="sheet-field"></label><input type="hidden" name="attr_medicine_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{int}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_medicine" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Medicine (INT)}} {{marked=[[@{int-marked}]]}} @{medicine_formula} "><span>Medicine (INT)</span></button><input type="text" name="attr_medicine" value="" class="sheet-field"></label><input type="hidden" name="attr_science_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{int}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_science" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Science (INT)}} {{marked=[[@{int-marked}]]}} @{science_formula} "><span>Science (INT)</span></button><input type="text" name="attr_science" value="" class="sheet-field"></label><input type="hidden" name="attr_technology_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{int}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_technology" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Technology (INT)}} {{marked=[[@{int-marked}]]}} @{technology_formula} "><span>Technology (INT)</span></button><input type="text" name="attr_technology" value="" class="sheet-field"></label></div><div><input type="hidden" name="attr_command_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{wit}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_command" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Command (WIT)}} {{marked=[[@{wit-marked}]]}} @{command_formula} "><span>Command (WIT)</span></button><input type="text" name="attr_command" value="" class="sheet-field"></label><input type="hidden" name="attr_manipulation_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{wit}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_manipulation" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Manipulation (WIT)}} {{marked=[[@{wit-marked}]]}} @{manipulation_formula} "><span>Manipulation (WIT)</span></button><input type="text" name="attr_manipulation" value="" class="sheet-field"></label><input type="hidden" name="attr_observation_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{wit}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_observation" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Observation (WIT)}} {{marked=[[@{wit-marked}]]}} @{observation_formula} "><span>Observation (WIT)</span></button><input type="text" name="attr_observation" value="" class="sheet-field"></label><input type="hidden" name="attr_survival_formula" value="{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{wit}scs=1cf=0]]}} {{zerodice=1}}" class="sheet-field"><label class="sheet-field"><button type="roll" name="roll_survival" value="&amp;{template:skillRoll} {{name=@{character-name}}} {{title=Survival (WIT)}} {{marked=[[@{wit-marked}]]}} @{survival_formula} "><span>Survival (WIT)</span></button><input type="text" name="attr_survival" value="" class="sheet-field"></label></div></div></div><div class="sheet-box sheet-box--injuries"><h2><span class="sheet-label">Critical Injuries</span></h2><div class="sheet-content"><div class="sheet-table--injuries"><fieldset class="repeating_injuries"><div class="sheet-tablerow"><label class="sheet-field"><span></span><input type="text" name="attr_injury" value="" class="sheet-field"></label><label class="sheet-field"><span></span><input type="text" name="attr_injury_max" value="" class="sheet-field"></label></div></fieldset></div></div></div><div class="sheet-box sheet-box--augments"><h2><span class="sheet-label">Augments</span></h2><div class="sheet-content"><div class="sheet-table--augments"><fieldset class="repeating_augments"><div class="sheet-tablerow"><input type="hidden" name="attr_augment_max" class="sheet-toggle sheet-togglebox"><label class="sheet-toggle"><input type="checkbox" name="attr_augment_max" value="expand" class="sheet-togglebox"><span></span></label><label class="sheet-field"><span></span><input type="text" name="attr_augment" value="" class="sheet-field"></label><label class="sheet-field"><span></span><textarea name="attr_augment" class="sheet-field"></textarea></label></div></fieldset></div></div></div><div class="sheet-box sheet-box--equipment"><h2><span class="sheet-label">Equipment</span></h2><div class="sheet-content"><label class="sheet-field"><span>$</span><input type="text" name="attr_money" value="" class="sheet-field"></label><span>Roll [number] or higher on 1d6 to ready an item as a Fast Action.</span><div class="sheet-table--equipment"><fieldset class="repeating_equipment"><div class="sheet-tablerow"><input type="hidden" name="attr_item_max" class="sheet-toggle sheet-togglebox"><label class="sheet-toggle"><input type="checkbox" name="attr_item_max" value="expand" class="sheet-togglebox"><span></span></label><label class="sheet-field"><span></span><input type="text" name="attr_item" value="" class="sheet-field"></label><label class="sheet-field"><span></span><textarea name="attr_item" class="sheet-field"></textarea></label></div></fieldset></div><h4>Other Items</h4><div class="sheet-table--other-items"><fieldset class="repeating_other-items"><div class="sheet-tablerow"><input type="text" name="attr_item" value="" class="sheet-field"></div></fieldset></div></div></div><div class="sheet-box sheet-box--notes"><h2><span class="sheet-label">Notes</span></h2><div class="sheet-content"><div class="sheet-table--notes"><fieldset class="repeating_notes"><div class="sheet-tablerow"><input type="hidden" name="attr_note_max" class="sheet-toggle sheet-togglebox"><label class="sheet-toggle"><input type="checkbox" name="attr_note_max" value="expand" class="sheet-togglebox"><span></span></label><label class="sheet-field"><span></span><input type="text" name="attr_note" value="" class="sheet-field"></label><label class="sheet-field"><span></span><textarea name="attr_note" class="sheet-field"></textarea></label></div></fieldset></div></div></div></div><div class="sheet-sec sheet-sec--side"><div class="sheet-box sheet-box--talents"><h2><span class="sheet-label">Talents</span></h2><div class="sheet-content"><div class="sheet-table--talents"><fieldset class="repeating_talents"><div class="sheet-tablerow"><input type="hidden" name="attr_talent_max" value="checked" class="sheet-toggle sheet-togglebox"><label class="sheet-toggle"><input type="checkbox" name="attr_talent_max" value="expand" class="sheet-togglebox"><span></span></label><label class="sheet-field"><span></span><input type="text" name="attr_talent" value="" class="sheet-field"></label><label class="sheet-field"><span></span><textarea name="attr_talent-desc" class="sheet-field"></textarea></label></div></fieldset></div></div></div></div></div></div><div class="message general"><rolltemplate class="sheet-rolltemplate-reactionRoll"><div class="sheet-rollbox"><div class="sheet-rollheader"><p class="sheet-rollprelude"><em>{{name}}</em>{{#title}}<span>{{#action}}{{action}}{{/action}}{{^action}}checks{{/action}}</span><span class="sheet-rolltitle">{{title}}</span>{{/title}}</p></div><div class="sheet-rollcontent"><span class="sheet-rolloutput">{{dice}} HITs</span>{{#rollWasCrit() dice}}<hr><span class="sheet-rollnote">Gain +1 Combat Action per TRIGGER rolled!</span>{{/rollWasCrit() dice}}</div></div></rolltemplate></div><div class="message general"><rolltemplate class="sheet-rolltemplate-skillRoll"><div class="sheet-rollbox"><div class="sheet-rollheader"><p class="sheet-rollprelude"><em>{{name}}</em>{{#title}}<span>{{#action}}{{action}}{{/action}}{{^action}}checks{{/action}}</span><span class="sheet-rolltitle">{{title}}</span>{{/title}}</p></div><div class="sheet-rollcontent"><span class="sheet-rolloutput">{{#zerodice}}<span class="sheet-rollresult">Untrained Skill</span>{{/zerodice}}{{dice}}{{#rollTotal() dice 0}} HITs<span class="sheet-rollfumble">Failure</span>{{/rollTotal() dice 0}}{{#rollTotal() dice 1}} HIT<span class="sheet-rollsuccess">Weak Success</span>{{/rollTotal() dice 1}}{{#rollGreater() dice 1}} HITs<span class="sheet-rollcrit">Strong Success</span>{{#rollWasCrit() dice}}<span class="sheet-rollresult">with TRIGGERS!</span>{{/rollWasCrit() dice}}{{/rollGreater() dice 1}}</span>{{#rollTotal() marked 1}}{{#rollGreater() dice 0}}<hr><span class="sheet-rollnote">You're using your Key Attribute. Gain +1 XP! (Except during combat)</span>{{/rollGreater() dice 0}}{{/rollTotal() marked 1}}{{#rollTotal() dice 0}}<hr><span class="sheet-rollnote">You learn from your mistakes. Gain +1 XP! (Except during combat)</span>{{/rollTotal() dice 0}}</div></div></rolltemplate></div>
<script type="text/worker">(()=>{"use strict";const t=JSON.parse('{"u2":"gilded-universe","i8":"0.1.0"}');function e(t){return function(t){if(Array.isArray(t))return o(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||i(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(t)))return;var r=[],n=!0,i=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(n=(a=s.next()).done)&&(r.push(a.value),!e||r.length!==e);n=!0);}catch(t){i=!0,o=t}finally{try{n||null==s.return||s.return()}finally{if(i)throw o}}return r}(t,e)||i(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function i(t,e){if(t){if("string"==typeof t)return o(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?o(t,e):void 0}}function o(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){for(var r=0;r<e.length;r++){var n=e[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}function c(t,e,r){return e&&s(t.prototype,e),r&&s(t,r),t}var l=function(){function i(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t.u2,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:t.i8;return a(this,i),this.__gameId=e,this.__version=r,this.__context=new u,this.toolbox=this.__toolbox(),this.util=this.__util(),this}return c(i,[{key:"resetCtx",value:function(){this.__context=new u}},{key:"__util",value:function(){return{parseValues:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i={},o={};return i=(t=Object.entries(t)).filter((function(t){var e=n(t,2),r=e[0];e[1];return!r.includes("repeating_")})),i=Object.fromEntries(i),t.filter((function(t){var e=n(t,2),r=e[0];e[1];return r.includes("repeating_")})).forEach((function(t){var e,i,a,s,c=n(t,2),l=c[0],u=c[1];if(i=!!(e=l.match(/^repeating_([A-Za-z0-9-]+)_?(-[A-Za-z0-9-]+)?_([A-Za-z0-9-_]+)$/))[1]&&e[1],a=!!e[2]&&e[2],s=!!e[3]&&e[3],o[i]||(o[i]=[]),o[i].length){var f=o[i].filter((function(t){return t.rowId===a}))[0];f||o[i].push(r({rowId:a},s,u)),f&&!f[s]&&(f[s]=u)}else o[i].push(r({rowId:a},s,u))})),e&&(o=(o=Object.entries(o)).map((function(t){var e=n(t,2),r=e[0],i=e[1];return 1===i.length&&(i=i[0]),[r,i]})),o=Object.fromEntries(o)),{attrSet:i,fieldSet:o}}}}},{key:"__toolbox",value:function(){var t=this;return{setAttrs:function(t){function e(e){return t.apply(this,arguments)}return e.toString=function(){return t.toString()},e}((function(t){var e,r;1==(arguments.length<=1?0:arguments.length-1)&&_.isFunction(arguments.length<=1?void 0:arguments[1])?r=arguments.length<=1?void 0:arguments[1]:1==(arguments.length<=1?0:arguments.length-1)&&_.isString(arguments.length<=1?void 0:arguments[1])?e=arguments.length<=1?void 0:arguments[1]:2==(arguments.length<=1?0:arguments.length-1)&&_.isString(arguments.length<=1?void 0:arguments[1])&&_.isFunction(arguments.length<=2?void 0:arguments[2])&&(e=arguments.length<=1?void 0:arguments[1],r=arguments.length<=2?void 0:arguments[2]),e&&(t=(t=Object.entries(t)).map((function(t){var r=n(t,2),i=r[0],o=r[1];return["repeating_".concat(e,"_").concat(i),o]})),t=Object.fromEntries(t)),r?setAttrs(t,r):setAttrs(t)})),getAllFields:function(r,n,i){getAttrs(["_reporder_repeating_".concat(n)],(function(o){getSectionIDs(n,(function(a){var s=o["_reporder_repeating_".concat(n)]?o["_reporder_repeating_".concat(n)].toLowerCase().split(","):[],c=e(new Set(s.filter((function(t){return a.includes(t)})).concat(a))),l=Object.getOwnPropertyNames(r[n][0]),u=new Set;c.forEach((function(t){l.forEach((function(e){"rowId"!==e&&u.add("repeating_".concat(n,"_").concat(t,"_").concat(e))}))})),getAttrs(Array.from(u),(function(e){var r=t.util.parseValues(e).fieldSet;_.partial(i,r[n])()}))}))}))}}}},{key:"listen",value:function(t){var e=this,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t)throw new Error("'listen()' must be called with an 'triggers' argument in the form of a String or an Array<String>.");return this.ctx&&this.ctx.triggers.length||this.resetCtx(),t&&_.isString(t)&&(t=t.split(" ")),(t=t.map((function(t){return{event:(t=t.split(":"))[0]?t[0]:_.noop(),attr:t[1]?t[1]:_.noop(),section:r||_.noop()}}))).forEach((function(t){e.ctx.addTrigger(t)})),this}},{key:"getAttrs",value:function(t){var e=this;if(!t)throw new Error("'getAttrs()' must be called with an 'attrs' argument in the form of a String or an Array<String>.");return t&&_.isString(t)&&(t=t.split(" ")),t.forEach((function(t){e.ctx.addAttr(t)})),this}},{key:"getFields",value:function(t,e){var r=this,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!t)throw new Error("'getFields()' must be called with an 'fields' argument in the form of a String or an Array<String>.");if(!e)throw new Error("'getFields()' must be called with an 'section' argument in the form of a String.");return t&&_.isString(t)&&(t=t.split(" ")),t=t.map((function(t){return{field:t,section:e}})),n?t:(t.forEach((function(t){r.ctx.addField(t)})),this)}},{key:"then",value:function(t){var e,r,n,i=this;if(!_.isFunction(t))throw new Error("'.then()' must receive a function.");return e=this.ctx.getTriggers(),r=this.ctx.attrs,n=this.ctx.fields.map((function(t){var e=t.section,r=t.field;return"repeating_".concat(e,"_").concat(r)})),on(e.join(" "),(function(o){getAttrs(_.union(r,n),(function(r){var n=i.util.parseValues(r),a=n.attrSet,s=n.fieldSet;try{_.partial(t,{e:o,gameId:i.gameId,version:i.version,attrSet:a,fieldSet:s,getAllFields:_.partial(i.toolbox.getAllFields,s),setAttrs:_.partial(i.toolbox.setAttrs)})()}catch(t){throw new Error("SheetWorker failed in 'on(".concat(e.join(" "),")'"),t)}}))})),this.resetCtx(),!1}},{key:"gameId",get:function(){return this.__gameId}},{key:"version",get:function(){return this.__version}},{key:"ctx",get:function(){return this.__context}}]),i}(),u=function(){function t(){return a(this,t),this.__triggers=[],this.__attrs=[],this.__fields=[],this}return c(t,[{key:"getTriggers",value:function(){return this.triggers.map((function(t){var e=t.event,r=t.attr,n=t.section;return n&&r?"".concat(e,":repeating_").concat(n,":").concat(r):n&&!r?"".concat(e,":repeating_").concat(n):"".concat(e,":").concat(r)}))}},{key:"addTrigger",value:function(t){this.__triggers.push(t)}},{key:"addAttr",value:function(t){this.__attrs.push(t)}},{key:"addField",value:function(t){this.__fields.push(t)}},{key:"triggers",get:function(){return this.__triggers}},{key:"attrs",get:function(){return this.__attrs}},{key:"fields",get:function(){return this.__fields}}]),t}();function f(t){return function(t){if(Array.isArray(t))return h(t)}(t)||function(t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return h(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return h(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function h(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}function g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var d=new l;d.listen("sheet:opened").getAttrs(["sheet_ver","character_name","character-name"]).then((function(t){var e,r=t.version,n=t.attrSet,i=t.setAttrs,o=n.character_name,a=n["character-name"]||o,s=n.sheet_ver,c=r;if(s&&""!=s)return i(g({},"sheet_ver",c)),!1;var l=function(t,e){var r;if(t>0)return(r=t,f(Array(r+1).keys()).slice(1)).map((function(){var t=generateRowID();return Object.fromEntries(e.map((function(e){var r=e.field,n=e.value;return["".concat(t,"_").concat(r),n]})))}))};i((g(e={},"sheet_ver",c),g(e,"sheet_mode","character"),g(e,"character-name",""!=a?a:o),g(e,"character-xp_max","450"),g(e,"money","0.00"),e),(function(){console.log("Your new character was created! Have fun!")})),i(Object.assign.apply(Object,f(l(1,[{field:"session-toggle",value:"hidden"},{field:"session-date",value:"Character Creation"},{field:"session-xp",value:"450"}])).concat(f(l(1,[{field:"session-toggle",value:"hidden"},{field:"session-date",value:"Campaign Arc 1"},{field:"session-header",value:"checked"}])),f(l(1,[{field:"session-date",value:"First Session!"},{field:"session-xp",value:""}])))),"sessionlog"),i(Object.assign.apply(Object,f(l(3,[{field:"lifepath",value:""}]))),"lifepaths"),i(Object.assign.apply(Object,f(l(6,[{field:"item",value:""}]))),"equipment"),i(Object.assign.apply(Object,f(l(4,[{field:"item",value:""}]))),"other-items")}));Array.from([{skill:"brute-force",attr:"str"},{skill:"close-combat",attr:"str"},{skill:"machinery",attr:"str"},{skill:"stamina",attr:"str"},{skill:"mobility",attr:"dex"},{skill:"piloting",attr:"dex"},{skill:"ranged-combat",attr:"dex"},{skill:"tinkering",attr:"dex"},{skill:"history",attr:"int"},{skill:"medicine",attr:"int"},{skill:"science",attr:"int"},{skill:"technology",attr:"int"},{skill:"command",attr:"wit"},{skill:"manipulation",attr:"wit"},{skill:"observation",attr:"wit"},{skill:"survival",attr:"wit"}]).forEach((function(t){var e=t.skill,r=t.attr;d.listen("change:".concat(e)).then((function(t){var n=t.e,i=t.setAttrs;"0"===String(n.newValue)&&"player"===n.sourceType&&i({skill:(parseInt(n.previousValue)||1)-1}),i(g({},"".concat(e,"_formula"),function(t,e){return e>0?"{{dice=[[[[".concat(e,"+(?{Bonus Dice|0})-?{Burn|0}]]-[[").concat(e,"+(?{Bonus Dice|0})]]d6dl?{Burn|0}>2f<@{").concat(t,"}scs=1cf=0]]}}"):"{{dice=[[[[1+(?{Bonus Dice|0})-?{Burn|0}]]-[[2+(?{Bonus Dice|0})]]d6dl[[1+?{Burn|0}]]>2f<@{".concat(t,"}scs=1cf=0]]}} {{zerodice=1}}")}(r,n.newValue||"0")))}))})),d.listen(["change:session-xp","change:session-header","remove"],"sessionlog").getFields(["session-xp","session-header"],"sessionlog").then((function(t){t.e;var e=t.getAllFields,r=t.setAttrs;e("sessionlog",(function(t){var e=0;t.forEach((function(t){"checked"!==t["session-header"]&&(e+=parseInt(t["session-xp"],10)||0)})),r(g({},"character-xp_max",e))}))}))})();</script>